<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Make reservation</title>

    <!-- reset -->
    <link rel="stylesheet" type="text/css" href="assets/css/reset.css">
    <!-- end reset -->

    <!-- bootstrap links including stylesheet-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
        crossorigin="anonymous">

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T"
        crossorigin="anonymous"></script>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <!-- end bootstrap links -->

    <!-- jquery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

</head>

<body>
    <div class="container-fluid">

        <div class="row">
            <!-- spacer -->
            <div class="container-inner col-md-1"></div>

            <div class="container-inner col-md-10">

                <!-- header block -->
                <header class="row">
                    <div class="col-md-12">
                        <div class="jumbotron text-center m-3">
                            <h1 class="text-center">
                                Hot Restaurant!
                            </h1>

                            <hr>

                            <p class="text-center">
                                Make a New Reservation
                            </p>
                            <p class="text-center">
                                <a id="view-tables-btn" class="btn btn-primary btn-large m-1" href="/view">View Tables</a> 
                                <a id="make-res-btn" class="btn btn-danger btn-large m-1" href="/make">Make Reservation</a>
                            </p>
                        </div>
                    </div>
                </header>
                <!-- END header block -->

            </div>

            <!-- spacer -->
            <div class="container-inner col-md-1"></div>
        </div>

        <!-- FORM SECTION -->
        <div class="row">

            <!-- spacer -->
            <div class="container-inner col-md-1"></div>

            <!-- FORM -->
            <div id="view-reservations" class="container-inner col-md-10 p-2">
                <!-- Reservation Form Here -->
                <form class="p-2">
                    <div class="form-group">
                        <label for="user-name">Name</label>
                        <input type="text" class="form-control" id="user-name" name="user-name" placeholder="">
                    </div>

                    <div class="form-group">
                        <label for="user-phone">Phone Number</label>
                        <input type="text" class="form-control" id="user-phone" name="user-phone" placeholder="xxx-xxx-xxxx">
                    </div>

                    <div class="form-group">
                        <label for="user-email">Email address</label>
                        <input type="email" class="form-control" id="user-email" aria-describedby="emailHelp" placeholder="Enter email">
                    </div>

                    <div class="form-group">
                        <label for="unique-id">Unique ID</label>
                        <input type="text" class="form-control" name="unique-id" id="unique-id" placeholder="">
                    </div>

                    <button type="submit" id="add-btn" class="btn btn-primary">Submit</button>
                </form>

            </div>

            <!-- spacer -->
            <div class="container-inner col-md-1"></div>

        </div>
        <!-- END FORM SECTION -->

        <footer class="row">
            <!-- spacer -->
            <div class="container-inner col-md-1"></div>

            <!-- main footer -->
            <div class="col-md-10">
                <p>
                    <a href="/api/tables">API Table Link</a> |
                    <a href="/api/waitlist">API Wait List</a> |
                    <a href="#">GitHub Repo</a>
                </p>
            </div>

            <!-- spacer -->
            <div class="container-inner col-md-1"></div>
        </footer>
    </div>

    <!-- JAVASCRIPT to send form data to handler -->
    <script type="text/javascript">
        // Question: What does this code do?
        // listens for the click event on the button with the add-btn id
        // then when it is clicked a "newCharacter" object is created with the values pulled from the form fields with the targeted ids
    
        $("#add-btn").on("click", function(event) {
          event.preventDefault(); //preventing the form's default behavior because we want to specify something different
          var newreservation = {
            name: $("#user-name").val().trim(),
            phoneNumber: $("#user-phone").val().trim(),
            email: $("#user-email").val().trim(),
            uniqueId: $("#unique-id").val().trim()
          };
    
          // Question: What does this code do?
          // uses the jQuery .post method - btw the syntax is $.post(URL,data,callback); 
          // to send an HTTP POST request to the server, specified by the url being requested
          // containing the newCharacter object as the data being sent along with the request
          // basically throws the newCharacter object to the server at the url route
          // this data will be in the body of the request
    
          $.post("/api/reservations", newreservation)
            .then(function(data) {
              console.log("make.html", data);
              alert("Adding reservation...");
            }); //this inner function catches the data sent back from the server after it's processed (the then function makes it wait) and logs it as well as popping up the alert
        });
      </script>

    
</body>

</html>